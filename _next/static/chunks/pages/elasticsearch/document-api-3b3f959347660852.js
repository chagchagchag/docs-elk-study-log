(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14],{989:function(e,s,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/elasticsearch/document-api",function(){return l(9360)}])},2294:function(e,s){"use strict";s.Z={src:"/docs-elk-study-log/_next/static/media/1.02c1ec92.png",height:1671,width:365,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAAICAIAAABcT7kVAAAAOUlEQVR42hXHQQ4AEAwEwP7/aSJOIvEHTlLFVkpPk6EUYi6VMMXM6DA7awy99286m9mR1qFKSwTAA+22LdDB38q+AAAAAElFTkSuQmCC",blurWidth:2,blurHeight:8}},3213:function(e,s){"use strict";s.Z={src:"/docs-elk-study-log/_next/static/media/2.a197addc.png",height:273,width:1034,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAACCAIAAADq9gq6AAAAOElEQVR42gVAUQqAIAz1/ieMoCKiJ7rndE7BTwksPSdSVKurTbXhc3kbQd7/Ou7vfCIIdoghtwhuVUosFm3jtoAAAAAASUVORK5CYII=",blurWidth:8,blurHeight:2}},9360:function(e,s,l){"use strict";l.r(s),l.d(s,{__toc:function(){return d}});var n=l(5893),a=l(2673),i=l(373),c=l(8426);l(9128);var r=l(2643),t=l(2294),o=l(3213);let d=[{depth:2,value:"Document API",id:"document-api"},{depth:2,value:"ELK 스택 설치",id:"elk-스택-설치"},{depth:2,value:"콘솔 접속",id:"콘솔-접속"},{depth:2,value:"PUT",id:"put"},{depth:2,value:"GET",id:"get"},{depth:2,value:"DELETE",id:"delete"},{depth:2,value:"POST",id:"post"},{depth:2,value:"UPDATE",id:"update"},{depth:2,value:"Bulk API",id:"bulk-api"}];function _createMdxContent(e){let s=Object.assign({h2:"h2",ul:"ul",li:"li",p:"p",a:"a",code:"code",img:"img",pre:"pre",span:"span"},(0,r.a)(),e.components);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"document-api",children:"Document API"}),"\n",(0,n.jsx)(s.h2,{id:"elk-스택-설치",children:"ELK 스택 설치"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.a,{href:"https://github.com/deviantony/docker-elk",children:"github.com/deviantony/docker-elk"})," 을 clone"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:".env"})," 파일 내의 주요 패스워드 들 수정"]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"비밀번호는 8자?이상이어야 에러가 나지 않습니다."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"docker-compose up setup"}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"setup-1 exited with code 0 이라는 메시지가 뜨면 정상설치 된 것 입니다."}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsx)(s.p,{children:"docker-compose up -d"}),"\n"]}),"\n",(0,n.jsxs)(s.li,{children:["\n",(0,n.jsxs)(s.p,{children:["kibana 는 ",(0,n.jsx)(s.a,{href:"http://localhost:5601",children:"http://localhost:5601"})," 로 접속 가능하며, user, password 는 아래와 같이 입력합니다."]}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"user : elastic"}),"\n",(0,n.jsxs)(s.li,{children:["password : ",(0,n.jsx)(s.code,{children:".env"})," 파일 내에 입력한 패스워드"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"콘솔-접속",children:"콘솔 접속"}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{placeholder:"blur",src:t.Z})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(s.p,{children:["콘솔은 아래와 같이 사용 가능합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(s.p,{children:"아래의 코드를 입력합니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"PUT helloworld/_doc/1"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "name": "aaa",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "message": "This is aaa"'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"그리고 오른쪽 상단의 Run 버튼을 누르거나 Ctrl + Enter 키를 눌러서 명령을 실행합니다."}),"\n",(0,n.jsx)(s.p,{children:(0,n.jsx)(s.img,{placeholder:"blur",src:o.Z})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsxs)(s.p,{children:["이렇게 하면 index 를 생성해두지 않은 상태라면 새로운 index 가 생성됩니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"put",children:"PUT"}),"\n",(0,n.jsx)(s.p,{children:"먼저 인덱스가 아무것도 생성되지 않은 상태에서 아래의 명령을 수행합니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"PUT logs_index/_doc/1"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "message": "PAYMENT_FAILURE",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "reason": "NETWORK_ERROR",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "occured_service": "abc-comics-payment-api"'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsxs)(s.p,{children:["이렇게 하면 ",(0,n.jsx)(s.code,{children:"logs_index"})," 라는 이름의 인덱스가 새로 생성되면서 데이터가 입력됩니다."]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"이번에는 아래의 명령을 수행합니다. 새로운 도큐먼트를 한 건 더 insert 하는 명령입니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"PUT logs_index/_doc/2"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "message": "PAYMENT_SUCCESS",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "reason": "SUCCESS",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "occured_service": "abc-comics-payment-api"'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsxs)(s.p,{children:["실행시켜 보면 ",(0,n.jsx)(s.code,{children:"logs_index"})," 라는 이름의 인덱스에 데이터가 insert 되었음을 결과화면에서 확인 가능합니다."]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"get",children:"GET"}),"\n",(0,n.jsx)(s.p,{children:"처음에 insert 했던 데이터를 조회해봅니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"plain","data-theme":"default",children:(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"GET logs_index/_doc/1"})})})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"출력결과는 아래와 같습니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_index": "logs_index",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_id": "1",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_version": 1,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_seq_no": 0,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_primary_term": 1,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "found": true,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_source": {'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "message": "PAYMENT_FAILURE",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "reason": "NETWORK_ERROR",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "occured_service": "abc-comics-payment-api"'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"두번째 insert 했던 데이터도 존재하는지 확인해봅니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"plain","data-theme":"default",children:(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"GET logs_index/_doc/2"})})})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"출력결과는 아래와 같습니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_index": "logs_index",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_id": "2",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_version": 1,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_seq_no": 1,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_primary_term": 1,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "found": true,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_source": {'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "message": "PAYMENT_SUCCESS",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "reason": "SUCCESS",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "occured_service": "abc-comics-payment-api"'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"delete",children:"DELETE"}),"\n",(0,n.jsx)(s.p,{children:"이번에는 도큐먼트를 선택해서 삭제해봅니다. 두번째로 insert 했던 데이터를 삭제합니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsx)(s.code,{"data-language":"plain","data-theme":"default",children:(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"DELETE logs_index/_doc/2"})})})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"출력결과는 아래와 같습니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_index": "logs_index",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_id": "2",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_version": 2,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "result": "deleted",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_shards": {'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "total": 2,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "successful": 1,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "failed": 0'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  },"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_seq_no": 2,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_primary_term": 1'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"post",children:"POST"}),"\n",(0,n.jsxs)(s.p,{children:["데이터 입력을 하는 연산입니다. PUT의 경우에는 Document id 를 입력해줘야 했습니다. POST 의 경우 Document Id 를 입력하지 않아도 됩니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)(s.pre,{"data-language":"bash","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"bash","data-theme":"default",children:[(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:"POST"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:"logs_index/_doc"})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:'"message"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"PAYMENT_SUCCESS"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string)"},children:","})]}),"\n",(0,n.jsxs)(s.span,{className:"line",children:[(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:'"occured_service"'}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-function)"},children:":"}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,n.jsx)(s.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"abc-comics-payment-api"'})]}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"출력결과는 아래와 같습니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_index": "logs_index",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_id": "VLZ8048BRYAsCL4RpbbY", # 여기 '})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_version": 1,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "result": "created",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_shards": {'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "total": 2,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "successful": 1,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "failed": 0'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  },"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_seq_no": 3,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_primary_term": 1'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsxs)(s.p,{children:["자세히 확인해보면 ",(0,n.jsx)(s.code,{children:"_id"})," 항목에 대해 ",(0,n.jsx)(s.code,{children:"VLZ8048BRYAsCL4RpbbY"})," 라는 값이 할당되었음을 확인 가능합니다.",(0,n.jsx)("br",{})]}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"update",children:"UPDATE"}),"\n",(0,n.jsx)(s.p,{children:"도큐먼트를 수정하고자 할때 UPDATE 연산을 사용합니다. UPDATE 연산은 원하는 필드만 수정하는 것이 가능합니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"POST logs_index/_update/1"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "doc": {'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "message": "PG_API_NETWORK_ERROR"'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  }"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"출력결과"}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"{"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_index": "logs_index",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_id": "1",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_version": 2,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "result": "updated",'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_shards": {'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "total": 2,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "successful": 1,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'    "failed": 0'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"  },"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_seq_no": 4,'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'  "_primary_term": 1'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"}"})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.h2,{id:"bulk-api",children:"Bulk API"}),"\n",(0,n.jsx)(s.p,{children:"Bulk API 를 이용하면 한번의 연산으로 여러 문서를 한번에 indexing 하거나 삭제하는 것이 가능합니다. 대량 색인이 필요할 때 사용하면 됩니다."}),"\n",(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"_id"})," 가 5, 6 인 데이터를 Bulk api 를 통해 indexing 합니다."]}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"POST _bulk"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'{ "index": {"_index": "logs_index", "_id": "5"} }'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'{ "field": "안녕하세요 (1) 번 이에요" }'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'{ "index": {"_index": "logs_index", "_id": "6"} }'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'{ "field": "안녕하세요 (2) 번 이에요" }'})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"이번에는 delete 와 create 연산을 함께 수행합니다."}),"\n",(0,n.jsxs)(s.ul,{children:["\n",(0,n.jsx)(s.li,{children:"_id = 5 인 도큐먼트는 삭제"}),"\n",(0,n.jsx)(s.li,{children:"_id = 7 인 도큐먼트 생성"}),"\n"]}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"POST _bulk"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'{ "delete": {"_index": "logs_index", "_id": "5"} }'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'{ "create": {"_index": "logs_index", "_id": "7"} }'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'{ "field": "안녕하세요 (3) 번 이에요" }'})})]})}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)(s.p,{children:"이번에는 update 연산을 수행합니다."}),"\n",(0,n.jsx)(s.pre,{"data-language":"plain","data-theme":"default",children:(0,n.jsxs)(s.code,{"data-language":"plain","data-theme":"default",children:[(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:"POST _bulk"})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'{ "update": {"_index": "logs_index", "_id": "6"} }'})}),"\n",(0,n.jsx)(s.span,{className:"line",children:(0,n.jsx)(s.span,{style:{color:"var(--shiki-color-text)"},children:'{ "doc": {"field": "(5) 번 이에요"} }'})})]})}),"\n",(0,n.jsx)("br",{})]})}let h={MDXContent:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:s}=Object.assign({},(0,r.a)(),e.components);return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(_createMdxContent,{...e})}):_createMdxContent(e)},pageOpts:{filePath:"pages/elasticsearch/document-api.mdx",route:"/elasticsearch/document-api",timestamp:1717251706e3,pageMap:[{kind:"Folder",name:"elasticsearch",route:"/elasticsearch",children:[{kind:"MdxPage",name:"aggregation",route:"/elasticsearch/aggregation"},{kind:"MdxPage",name:"document-api",route:"/elasticsearch/document-api"},{kind:"MdxPage",name:"elk-elasticsearch",route:"/elasticsearch/elk-elasticsearch"},{kind:"MdxPage",name:"search-api",route:"/elasticsearch/search-api"},{kind:"Meta",data:{"elk-elasticsearch":"Elasticsearch","document-api":"Document API",aggregation:"Aggregation","search-api":"Search API"}}]},{kind:"MdxPage",name:"index",route:"/"},{kind:"Meta",data:{index:"Introduction",elasticsearch:"Elasticsearch","search-api":"search-api",aggregation:"aggregation",contact:{title:"Contact ↗",type:"page",href:"-",newWindow:!0}}}],flexsearch:{codeblocks:!0},title:"Document API",headings:d},pageNextRoute:"/elasticsearch/document-api",nextraLayout:i.ZP,themeConfig:c.Z};s.default=(0,a.j)(h)},8426:function(e,s,l){"use strict";var n=l(5893);l(7294);let a={logo:(0,n.jsx)("span",{children:"Docs ELK Study Log"}),project:{link:"https://github.com/chagchagchag/docs-elk-study-log"},docsRepositoryBase:"https://github.com/chagchagchag/docs-elk-study-log",footer:{text:"Nextra Docs Template"}};s.Z=a},5789:function(){}},function(e){e.O(0,[774,796,888,179],function(){return e(e.s=989)}),_N_E=e.O()}]);